+++
author = "Thomas Evensen"
title = "Thoughts about Verify"
date = "2024-11-20"
tags = ["verify remote"]
categories = ["synchronize"]
+++

In future releases, it may be necessary to conduct a more thorough analysis of the output generated by rsync. However, for a brief test, the following was the outcome:

The detailed output from rsync, utilizing the `--itemize-changes` arguments for files, indicates the following four initial positions in the output:

- `<f.st`: The file is being transferred *from the local host* to the remote host (push).

- `>f.st`: The file is being transferred *from the remote host* to the local host (pull).

#### Short test

Before the test commence, the local and remote only differs in timestamp for one file. One file in the local repository is more recently updated by date compared to the file in remote repository. This indicates a push operation by the verification.

{{< figure src="/images/verify/pushafile.png" alt="" position="center" style="border-radius: 8px;" >}}


Then the date on the remote device was touched, and the date on the file was updated to the current time and date. Consequently, the verification now indicates a pull request.

{{< figure src="/images/verify/pullafile.png" alt="" position="center" style="border-radius: 8px;" >}}

#### After the remote file was touched

**Important**: an estimate, like for a normal synchronize task, indicates that the file should be transferred *from the local host* to the remote host. But, if the parameter `--update` is added, rsync *will not* mark the file for transfer. The parameter instructs rsync to evaluate  timestamps and if remote timestamp is more up to date, the file is not tagged for synchronization. An estimate run without the `--update` parameter.

{{< figure src="/images/verify/synchronize.png" alt="" position="center" style="border-radius: 8px;" >}}

#### With the parameter --update

 If the parameter `--update` is added, the estimate would show no files to synchronize. The challenge now seems to be that remote has a more up to date version of the file. But the Verify function seems to pick up that the file should be pulled from the remote.


